if(process.env.NODE_ENV&&"production"!==process.env.NODE_ENV)throw new Error(`NODE_ENV (${process.env.NODE_ENV}) does not match value for compiled assets: production`);process.env.NODE_ENV="production",require("/Users/jamie/GitHub/image-gallery/node_modules/source-map-support/source-map-support.js").install(),module.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=15)}([function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/react/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/fusion-plugin-react-router/dist/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/react-redux/lib/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/fusion-core/dist/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/axios/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/fusion-plugin-react-redux/dist/index.js")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/fusion-plugin-styletron-react/dist/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/redux-thunk/lib/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/redux/lib/redux.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/fusion-react/dist/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/koa-bodyparser/index.js")},function(e,t,a){const{createPlugin:n,getEnv:o}=a(3),l=a(20),r=a(21),i=a(22);e.exports=function(e){return n({middleware:()=>{const{baseAssetPath:t,env:a}=o();return r(t,i(l.resolve(e,`.fusion/dist/${a}/client`),{defer:!0,setHeaders:e=>{e.setHeader("Cache-Control","public, max-age=31536000"),e.setHeader("Timing-Allow-Origin","*")}}))}})}},function(e,t){e.exports=function(e,t){0===e.url.indexOf(t)&&(e.url=e.url.slice(t.length),""===e.url&&(e.url="/"))}},function(e,t,a){const n=a(23),{createPlugin:o}=a(3);e.exports=o({middleware:()=>{const e=n();return function(t,a){return t.syncChunks=e.syncChunks,t.chunkUrlMap=e.chunkUrlMap,a()}}})},function(e,t,a){e.exports=a(16)},function(e,t,a){"use strict";a.r(t),a.d(t,"start",function(){return y});var n=a(6),o=a.n(n),l=a(3),r=a(12),i=a.n(r),s=a(14),p=a.n(s),u=a(13),d=a.n(u);a(17);const{prefix:m,webpackPublicPath:c}=Object(l.getEnv)();let g;a.p=c+"/";const h=a(26);let b=null;const f={serve:null},A=h?h.default||h:()=>{throw new Error("App should export a function")};async function y({port:e,dir:t="."}){return g=i()(t),b=o.a.createServer(),await async function(){const e=await A();x(e,g),x(e,p.a),b&&e.register(l.HttpServerToken,Object(l.createPlugin)({provides:()=>b}));0;f.serve=e.callback(),f.app=e}(),b.on("request",(e,t)=>{m&&d()(e,m),f.serve(e,t).catch(e=>{f.app.onerror(e)})}),new Promise(t=>{b&&b.listen(e,()=>{t(b)})})}function x(e,t,a){e.register(t,a),e.plugins.unshift(e.plugins.pop())}},function(e,t){},function(e,t,a){const n=a(19);n.connect(process.env.MONGODB_URI||"mongodb://localhost/image-gallery",{useNewUrlParser:!0});n.Promise=global.Promise;const o=new n.Schema({name:{type:String,required:!0,unique:!0},images:[{file:{type:String},imagePreviewUrl:{type:String}}]});e.exports=n.model("AlbumSchema",o)},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/mongoose/index.js")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/koa-mount/index.js")},function(e,t){e.exports=require("/Users/jamie/GitHub/image-gallery/node_modules/koa-static/index.js")},function(e,t,a){const n=a(24),o=a(25);e.exports=(()=>({syncChunks:o,chunkUrlMap:n}))},function(e,t,a){e.exports=new Map([[0,[["es5","client-main-05402a37a237a1252870.js"]]],[1,[["es5","client-vendor-109518ff4b8ab943da54.js"]]]].map(e=>(e[1]=new Map(e[1].map(e=>(e[1]=a.p+e[1],e))),e)))},function(e,t){e.exports=[1,0]},function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(7),r=a.n(l),i=a(0),s=a.n(i),p=a(2),u=a(4),d=a.n(u);const m="http://localhost:3000/api",c=(e,t)=>a=>{d.a.post(`${m}/create-album`,{albumName:e}).then(e=>{a({type:"CREATE_ALBUM",payload:e.data}),t.push("/findAlbum/"+e.data.albumId)}).catch(e=>{console.log("error.response in create album",e.response)})},g=e=>({type:"SHOW_DELETE_ALBUM_POPUP",payload:e}),h=e=>({type:"SHOW_DELETE_IMAGE_POPUP",payload:e}),b=e=>({type:"SHOW_IMAGE_POPUP",payload:e});function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const A={display:"flex",justifyContent:"center"},y={marginBottom:"50px",fontSize:"16px"},x={display:"flex",justifyContent:"center",marginBottom:"10px"},E={width:"300px",height:"31px",border:"none",borderBottom:"1px solid gray",fontSize:"18px",paddingTop:"5px",paddingBottom:"5px",backgroundColor:"#EDF1F3"},w={paddingTop:"1px",border:"none",border:".5px solid gray",padding:"10px 12px",fontSize:"15px"};var v=Object(p.connect)(e=>({}),{createAlbum:c})(class extends i.Component{constructor(e){super(e),f(this,"handleChange",e=>{this.setState({value:e.target.value})}),f(this,"handleSubmit",e=>{e.preventDefault();const t=this.state.value;this.props.createAlbum(t,this.props.history)}),this.state={value:""}}render(){return s.a.createElement("div",{style:A},s.a.createElement("form",{style:y,onSubmit:this.handleSubmit},s.a.createElement("div",{style:x},s.a.createElement("label",null,"Create New Album")),s.a.createElement("input",{style:E,type:"text",onChange:this.handleChange}),s.a.createElement("button",{style:w,type:"submit",value:"Submit"},"Submit")))}});const P={fontFamily:"HelveticaNeue-Light, Arial",margin:"auto",width:"95%"},D={textAlign:"center",margin:"50px"},C={margin:"5px",display:"grid",gridTemplateColumns:"repeat(4, 350px)",justifyContent:"center"},I={border:"1px solid",margin:"20px",width:"300px",height:"350px",textDecoration:"none",alignContent:"space-between",alignSelf:"center"},S={width:"300px",height:"300px",display:"flex",justifyContent:"center",backgroundColor:"#EDF1F3"},j={maxWidth:"300px",maxHeight:"300px",alignSelf:"center"},U={textAlign:"center",color:"black",fontSize:"20px",paddingTop:"15px"};var T=Object(p.connect)(e=>({albumsArray:e.albums||[],columns:e.columns||[]}),{getAlbums:()=>e=>{d.a.get(`${m}/getAlbums`).then(t=>{e({type:"GET_ALBUMS",payload:t.data})}).catch(e=>{console.log("error",e.response)})},createAlbum:c})(class extends i.Component{constructor(e){super(e)}componentDidMount(){this.props.getAlbums()}render(){return s.a.createElement("div",{style:P},s.a.createElement("h1",{style:D},"Image Gallery"),s.a.createElement(v,{history:this.props.history}),s.a.createElement("div",{style:C},this.props.albumsArray.map((e,t)=>s.a.createElement(n.Link,{style:I,key:t,to:`/findAlbum/${e._id}`},s.a.createElement("div",{style:S},e.images.length&&e.images[0].imagePreviewUrl?s.a.createElement("img",{style:j,src:e.images[0].imagePreviewUrl}):s.a.createElement("div",null,"add image")),s.a.createElement("div",{style:U},e.name)))))}});function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O={alignContent:"center",margin:"50px"},M={width:"300px",margin:"auto",padding:"20px"},_={display:"flex",justifyContent:"center",marginBottom:"10px"},B={border:"none"},G={paddingTop:"1px",border:"none",border:".5px solid gray",padding:"8px 8px",fontSize:"15px"};var H=Object(p.connect)(e=>({}),{addImage:(e,t)=>a=>{d.a.put(`${m}/add-image/${t}`,{image:e}).then(e=>{a({type:"ADD_IMAGE",payload:e.data})}).catch(e=>{console.log("error.response",e.response)})}})(class extends i.Component{constructor(e){super(e),k(this,"handleUpload",e=>{let t=new FileReader,a=e.target.files[0];t.onloadend=(()=>{this.setState({file:a.name,imagePreviewUrl:t.result})}),t.readAsDataURL(a)}),k(this,"handleSubmit",e=>{e.preventDefault();const t={file:this.state.file,imagePreviewUrl:this.state.imagePreviewUrl};this.props.addImage(t,this.props.albumId)}),this.state={file:"",imagePreviewUrl:""}}render(){return s.a.createElement("div",{style:O},s.a.createElement("div",{style:M},s.a.createElement("div",{style:_},s.a.createElement("label",null,"Add Image")),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{style:B,type:"file",accept:".jpg, .jpeg, .png",onChange:e=>this.handleUpload(e)}),s.a.createElement("button",{style:G},"Save"))))}});function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const L={zIndex:"1",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)",position:"fixed",height:"100%",width:"100%",left:"0",top:"0",display:"flex"},R={width:"400px",height:"200px",backgroundColor:"white",margin:"auto"},F={display:"flex",justifyContent:"space-around"},N={border:".5px solid",fontSize:"16px",padding:"5px",width:"100px",height:"40px"},V={textAlign:"center",paddingTop:"40px",paddingBottom:"40px",fontSize:"25px"};var Y=Object(p.connect)(e=>({albumId:e.album._id,imageToDeleteId:e.imageToDeleteId,albumToDeleteId:e.albumToDeleteId,showDeleteAlbumPopupBool:e.showDeleteAlbumPopupBool}),{showDeleteAlbumPopup:g,showDeleteImagePopup:h,deleteImage:(e,t)=>a=>{d.a.post(`${m}/delete-image`,{imageToDelete:e,albumId:t}).then(e=>{a({type:"DELETE_IMAGE",payload:e.data})}).catch(e=>{console.log("error.response",e.response)})},deleteAlbum:e=>t=>{d.a.post(`${m}/delete-album`,{albumId:e}).then(e=>{t({type:"DELETE_ALBUM",payload:e.data})}).catch(e=>{console.log("error.response",e.response)})}})(class extends i.Component{constructor(e){super(e),q(this,"handleDeleteAlbumCancel",()=>{this.props.showDeleteAlbumPopup()}),q(this,"handleDeleteImageCancel",()=>{this.props.showDeleteImagePopup()}),q(this,"handleDeleteAlbumClick",e=>{this.props.showDeleteAlbumPopup(),this.props.deleteAlbum(e)}),q(this,"handleDeleteImageClick",(e,t)=>{this.props.showDeleteImagePopup(),this.props.deleteImage(e,t)})}render(){return s.a.createElement("div",{style:L},s.a.createElement("div",{style:R},this.props.showDeleteAlbumPopupBool?s.a.createElement("div",null,s.a.createElement("div",{style:V},"Delete Album?"),s.a.createElement("div",{style:F},s.a.createElement("button",{style:N,onClick:this.handleDeleteAlbumCancel},"Cancel"),s.a.createElement("button",{style:N,onClick:()=>this.handleDeleteAlbumClick(this.props.albumId)},"Yes"))):s.a.createElement("div",null,s.a.createElement("div",{style:V},"Delete Image?"),s.a.createElement("div",{style:F},s.a.createElement("button",{style:N,onClick:this.handleDeleteImageCancel},"Cancel"),s.a.createElement("button",{style:N,onClick:()=>this.handleDeleteImageClick(this.props.imageToDeleteId,this.props.albumId)},"Yes")))))}});function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const J={zIndex:"1",overflow:"auto",backgroundColor:"rgba(0,0,0,0.4)",position:"fixed",height:"100%",width:"100%",left:"0",top:"0",display:"flex"},Q={maxWidth:"1000px",maxHeight:"1000px",paddingLeft:"15px",paddingRight:"15px",paddingBottom:"15px",backgroundColor:"white",margin:"auto"},K={float:"right",fontSize:"30px"};var z=Object(p.connect)(e=>({imageToShow:e.imageToShow}),{showImagePopup:b})(class extends i.Component{constructor(e){super(e),W(this,"handleClosePopup",()=>{this.props.showImagePopup()}),W(this,"handleDelete",e=>{this.props.showImagePopup()})}render(){return s.a.createElement("div",{style:J},s.a.createElement("div",{style:Q},s.a.createElement("div",{style:K,onClick:this.handleClosePopup},"Ã—"),s.a.createElement("div",null,s.a.createElement("img",{src:this.props.imageToShow}))))}});function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const X={fontFamily:"HelveticaNeue-Light, Arial",margin:"auto",paddingTop:"20px"},Z={textDecoration:"none",fontSize:"20px",fontWeight:"600",paddingLeft:"100px"},ee={display:"flex",justifyContent:"center",margin:"40px"},te={fontSize:"25px",textAlign:"center",fontWeight:"500"},ae={margin:"5px",display:"grid",gridTemplateColumns:"repeat(5, 280px)",justifyContent:"center"},ne={border:"1px solid",margin:"10px",width:"250px",height:"250px",textDecoration:"none",display:"flex",flexDirection:"column",alignContent:"space-between"},oe={width:"250px",height:"210px",display:"flex",justifyContent:"center",backgroundColor:"#EDF1F3"},le={maxWidth:"250px",maxHeight:"210px",alignSelf:"center"},re={display:"flex",justifyContent:"flex-end",paddingTop:"5px"},ie={border:"none",paddingTop:"5px",paddingLeft:"20px"},se={width:"15px",height:"15px",border:"none",alignSelf:"right"};var pe=Object(p.connect)(e=>(console.log("state",e),{album:e.album||{images:[]},showDeleteAlbumPopupBool:e.showDeleteAlbumPopupBool,showDeleteImagePopupBool:e.showDeleteImagePopupBool,showImagePopupBool:e.showImagePopupBool,redirectToHome:e.redirectToHome}),{findAlbum:e=>t=>{d.a.get(`${m}/findAlbum/${e}`).then(e=>{t({type:"GET_ALBUM",payload:e.data})}).catch(e=>{console.log("error",e.response)})},showDeleteAlbumPopup:g,showDeleteImagePopup:h,showImagePopup:b})(class extends i.Component{constructor(e){super(e),$(this,"handleDeleteAlbumClick",e=>{this.props.showDeleteAlbumPopup(e)}),$(this,"handleDeleteImageClick",e=>{this.props.showDeleteImagePopup(e)}),$(this,"handleImagePopupClick",e=>{this.props.showImagePopup(e)})}componentDidMount(){const e=this.props.match.params.id;this.props.findAlbum(e)}render(){return this.props.album._id!==this.props.match.params.id?null:s.a.createElement("div",null,this.props.redirectToHome?s.a.createElement(n.Redirect,{to:"/"}):s.a.createElement("div",{style:X},s.a.createElement("div",null,this.props.showDeleteAlbumPopupBool?s.a.createElement(Y,null):null),s.a.createElement("div",null,this.props.showDeleteImagePopupBool?s.a.createElement(Y,null):null),s.a.createElement("div",null,this.props.showImagePopupBool?s.a.createElement(z,null):null),s.a.createElement(n.Link,{style:Z,to:"/"},"Home"),s.a.createElement("div",{style:ee},s.a.createElement("div",{style:te},this.props.album.name),s.a.createElement("button",{style:ie,onClick:()=>this.handleDeleteAlbumClick(this.props.album._id)},s.a.createElement("img",{style:se,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGsSURBVGhD7dq/K0VxGMfxm19FoSQpm4lB2FHKRBJlMtiUxWJAFpuN7Fb/gQmLVVlMFoVsiuRHIT/eT91vPenp3HM7v255PvVa7nPP934/0b3nnnNLKWUGJ3jBTwyfOMcKGlAT2YK12biO0IhCM4pvWBusxhoKzT70hr5wh6sI13iHPu4SheYCekNjiJMOPEAf245M0oZJzEe4h97MAqznWeSvo49dhvU8MYseVJ1W/H2hor1iGLHSjSXswFqsaIeQ/Q0hMiOwFqg164iMF8lZxSKdsN41ak0f/memcVwDNpAo8iFl/Y/m7QCJ4kVS5kVCKhV5gpzFisfyY8EHwky8Qc+foefyFUDPtcyLDCBETsP1TM6LdORDTM+noHMDPde8SIgXgRcxeJEQLwIvYvAiIV4EXsTgRUK8CLyIwYuEeBF4EYMXCalUZBXhCvli+bFAfhCgr6DLZvR8G3r+936klnmRvHiRkDlYC+dtF4kid7Dk0qe1eJ7kfn/i7MFaPC9nqEPiNOMU1otk7Ra9SC1N2ETUW2Sa5Mq9/GCnC5mkHv0Yx0RGBtGCKlIq/QI+C+St9GvhtAAAAABJRU5ErkJggg=="}))),s.a.createElement(H,{albumId:this.props.match.params.id}),s.a.createElement("div",{style:ae},this.props.album.images.map((e,t)=>s.a.createElement("div",{style:ne,key:t},s.a.createElement("div",{style:oe,onClick:()=>this.handleImagePopupClick(e.imagePreviewUrl)},s.a.createElement("img",{style:le,src:e.imagePreviewUrl})),s.a.createElement("div",{style:re},s.a.createElement("button",{style:ie,onClick:()=>this.handleDeleteImageClick(e._id)},s.a.createElement("img",{style:se,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGsSURBVGhD7dq/K0VxGMfxm19FoSQpm4lB2FHKRBJlMtiUxWJAFpuN7Fb/gQmLVVlMFoVsiuRHIT/eT91vPenp3HM7v255PvVa7nPP934/0b3nnnNLKWUGJ3jBTwyfOMcKGlAT2YK12biO0IhCM4pvWBusxhoKzT70hr5wh6sI13iHPu4SheYCekNjiJMOPEAf245M0oZJzEe4h97MAqznWeSvo49dhvU8MYseVJ1W/H2hor1iGLHSjSXswFqsaIeQ/Q0hMiOwFqg164iMF8lZxSKdsN41ak0f/memcVwDNpAo8iFl/Y/m7QCJ4kVS5kVCKhV5gpzFisfyY8EHwky8Qc+foefyFUDPtcyLDCBETsP1TM6LdORDTM+noHMDPde8SIgXgRcxeJEQLwIvYvAiIV4EXsTgRUK8CLyIwYuEeBF4EYMXCalUZBXhCvli+bFAfhCgr6DLZvR8G3r+936klnmRvHiRkDlYC+dtF4kid7Dk0qe1eJ7kfn/i7MFaPC9nqEPiNOMU1otk7Ra9SC1N2ETUW2Sa5Mq9/GCnC5mkHv0Yx0RGBtGCKlIq/QI+C+St9GvhtAAAAABJRU5ErkJggg=="}))))))))}});var ue=()=>s.a.createElement(n.NotFound,null,s.a.createElement("div",null,"404"));var de=s.a.createElement(n.Switch,null,s.a.createElement(n.Route,{exact:!0,path:"/",component:T}),s.a.createElement(n.Route,{exact:!0,path:"/findAlbum/:id",component:pe}),s.a.createElement(n.Route,{component:ue})),me=a(5),ce=a.n(me),ge=a(8),he=a.n(ge),be=a(9),fe=a(10),Ae=a.n(fe);function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){xe(e,t,a[t])})}return e}function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ee=(e,t)=>{switch(t.type){case"GET_ALBUMS":return ye({},e,{albums:t.payload.albums});case"GET_ALBUM":return{album:t.payload.album};case"CREATE_ALBUM":return ye({},t.payload);case"ADD_IMAGE":return ye({},e,{album:ye({},e.album,{images:t.payload.newAlbum.images})});case"SHOW_DELETE_ALBUM_POPUP":return!0===e.showDeleteAlbumPopupBool?ye({},e,{showDeleteAlbumPopupBool:!1}):ye({},e,{showDeleteAlbumPopupBool:!0,albumToDeleteId:t.payload});case"SHOW_DELETE_IMAGE_POPUP":return!0===e.showDeleteImagePopupBool?ye({},e,{showDeleteImagePopupBool:!1}):ye({},e,{showDeleteImagePopupBool:!0,imageToDeleteId:t.payload});case"SHOW_IMAGE_POPUP":return!0===e.showImagePopupBool?ye({},e,{showImagePopupBool:!1}):ye({},e,{showImagePopupBool:!0,imageToShow:t.payload});case"DELETE_ALBUM":return ye({},e,{redirectToHome:!0});case"DELETE_IMAGE":return ye({},e,{album:ye({},e.album,{images:t.payload.newAlbum.images})});default:return e}},we=a(3),ve=a(11),Pe=a.n(ve);const De=a(18);var Ce=Object(we.createPlugin)({middleware(){const e=Pe()();return async(t,a)=>{if("GET"===t.method&&"/api/getAlbums"===t.path){const e=await De.find({});t.body={message:"all albums found",albums:e}}else if("GET"===t.method&&t.path.startsWith("/api/findAlbum/")){const e=t.path.match(/findAlbum\/(.*)/)[1],a=await De.findOne({_id:e});t.body={message:"album found",album:a}}else if("POST"===t.method&&"/api/create-album"===t.path){await e(t,()=>Promise.resolve());let{albumName:a}=t.request.body;const n=new De({name:a}),o=await n.save();t.body={message:"album created",albumId:o._id}}else if("PUT"===t.method&&t.path.startsWith("/api/add-image")){const a=t.path.match(/add-image\/(.*)/)[1];await e(t,()=>Promise.resolve());let{image:n}=t.request.body;let o=(await De.findOne({_id:a})).images;o.push(n);const l=await De.findOneAndUpdate({_id:a},{$set:{images:o}},{new:!0});t.body={message:"image added",newAlbum:l}}else if("POST"===t.method&&"/api/delete-album"===t.path){await e(t,()=>Promise.resolve());let{albumId:a}=t.request.body;const n=await De.findOneAndDelete({_id:a});t.body={message:"album deleted",result:n}}else if("POST"===t.method&&"/api/delete-image"===t.path){await e(t,()=>Promise.resolve());let{imageToDelete:a,albumId:n}=t.request.body;const o=(await De.findOne({_id:n})).images;for(let e=0;e<o.length;e++){String(o[e]._id)===a&&o.splice(e,1)}const l=await De.findOneAndUpdate({_id:n},{$set:{images:o}},{new:!0});t.body={message:"image deleted",newAlbum:l}}return a()}}});function Ie(){const e=new Ae.a(de);return e.register(me.ReduxToken,ce.a),e.register(me.ReducerToken,Ee),e.register(r.a),e.register(o.a),e.register(me.EnhancerToken,Object(be.applyMiddleware)(he.a)),e.register(Ce),e.register(me.GetInitialStateToken,async e=>({showDeleteImagePopupBool:!1,showImagePopupBool:!1,showDeleteAlbumPopupBool:!1,redirectToHome:!1})),e}a.d(t,"default",function(){return Ie})}]);
//# sourceMappingURL=server-main.js.map