{"version":3,"file":"main.85d30338fd550c7eaacc.hot-update.js","sources":["/Users/jamie/GitHub/image-gallery/src/server/routes.js"],"sourcesContent":["const AlbumModel = require(\"./AlbumModel\");\nimport { createPlugin } from \"fusion-core\";\nimport bodyParser from \"koa-bodyparser\";\n\nexport default __NODE__ &&\n  createPlugin({\n    middleware() {\n      const parseBody = bodyParser();\n      return async (ctx, next) => {\n        // get all albums\n        if (ctx.method === \"GET\" && ctx.path === \"/api/albums\") {\n          const albums = await AlbumModel.find({}).exec();\n          console.log(\"albums\");\n          ctx.body = albums;\n          // get album by id\n        } else if (ctx.method === \"GET\" && ctx.path === \"/api/album/:id\") {\n          let { id } = ctx.request.body;\n          const albums = await AlbumModel.find({ id }).exec();\n          return next();\n          // create album\n        } else if (ctx.method === \"POST\" && ctx.path === \"/api/create-album\") {\n          await parseBody(ctx, () => Promise.resolve());\n          let { name, images } = ctx.request.body;\n          const newAlbum = new AlbumModel({ name, images });\n          const result = await newAlbum.save();\n          console.log(\"result\", result);\n          ctx.body = { message: \"status ok\", result };\n        }\n        return next();\n      };\n    }\n  });\n"],"mappings":";;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AA1BA;;;;A","sourceRoot":""}