{"version":3,"file":"main.02362a7f00b9bab8dd0b.hot-update.js","sources":["/Users/jamie/GitHub/image-gallery/src/server/routes.js"],"sourcesContent":["const AlbumModel = require(\"./AlbumModel\");\nimport { createPlugin } from \"fusion-core\";\nimport bodyParser from \"koa-bodyparser\";\n\n// const STATUS_USER_ERROR = 422;\n// const STATUS_SERVER_ERROR = 500;\n// const STATUS_OKAY = 200;\n// const STATUS_NOT_FOUND = 404;\n\n// module.exports = app => {\n//   app.get(\"/api/albums\", (req, res) => {\n//     AlbumModel.find({})\n//       .then(result =>\n//         console.log(\"result\", result)\n//         res.status(200).json(result);\n//       })\n//       .catch(() => {\n//         res\n//           .status(500)\n//           .json({ message: \"The information could not be retrieved\" });\n//       });\n//   });\n// };\n\nexport default __NODE__ &&\n  createPlugin({\n    middleware() {\n      const parseBody = bodyParser();\n      return async (ctx, next) => {\n        console.log(\"ctx.method\", ctx.method);\n        console.log(\"ctx.path\", ctx.path);\n        if (ctx.method === \"GET\" && ctx.path === \"/api/album\") {\n          console.log(\"ctx\", ctx);\n        } else if (ctx.method === \"GET\" && ctx.path === \"/api/album/:id\") {\n          console.log(\"getone\");\n          return next();\n        } else if (ctx.method === \"POST\" && ctx.path === \"/api/create-album\") {\n          console.log(\"ctx.body post\", ctx.body);\n\n          await parseBody(ctx, Promise.resolve);\n          ctx.body = ctx.request.body;\n          console.log(\"ctx.body\", ctx.body);\n        }\n      };\n    }\n  });\n"],"mappings":";;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;;;;A","sourceRoot":""}